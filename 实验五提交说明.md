# AircraftWar

实验五作业：
    
Task1: Swing板块开发
-  
- 新建了MenuPanel菜单栏和ScorePanel排行榜，可以实现难度选择、音效选择、得分排行、添加当局分数、删除历史记录的功能，代码位于panel目录下。
- 为button、combobox设置了监听，从而实现交互功能。
- 修改原来的Main函数逻辑，添加cardlayout相关功能，实现页面控制。

Task2：音乐控制
-
- 新建了soundManager类实现本地音乐文件的控制，包括单次or循环播放、暂停等功能，对上层提供方法接口。
- 在Game函数的对应逻辑中调用soundManager类的方法，实现了子弹发射、击中敌机、道具生效和英雄机坠毁（游戏结束）的音效。
- *由于尚未实现炸弹道具，设置捡到炸弹道具即发出炸弹音效*

Task3：多线程开发
- 
*目的：实现道具失效逻辑*

- 游戏线程

  - 在 Game.java 中使用 ScheduledExecutorService 实例的 schedule 方法，创建 firePropTimer 任务。
  - 任务的 Runnable (revertTask) 在 3 秒后执行，将英雄机的射击策略和射击频率 (shootDuration) 还原到默认值。

- 音乐线程

  - SoundManager 使用了 synchronized 关键字和并发集合来保证线程安全。

Others:
-
- 测试中发现短期内多次获得道具的音乐播放bug，使用强制每次播放时都创建一个新的 Clip 实例的方法，实现音效的叠加播放。
- 添加道具生效倒计时显示逻辑：
  - 利用成员变量在道具生效线程中记录系统时间，进行时间信息的传递与转换。实现了跨线程协作。
- 实现了结束游戏后可以从排行榜返回菜单重新开始游戏。（为实现这个逻辑给英雄机类添加了公有的reset方法）
- 线程问题待修改！